name: æ ‡å‡†å‹-ARM

on:
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-24.04-arm
    
    steps:
      - name: ç³»ç»Ÿåˆå§‹çŠ¶æ€
        run: |
          echo "============================================="
          echo "ç³»ç»ŸçŠ¶æ€"
          echo "============================================="
          echo "å†…å­˜å’Œäº¤æ¢ç©ºé—´ï¼š"
          sudo free -h
          echo ""
          echo "å¯ç”¨å­˜å‚¨ï¼š"
          sudo df -h
          echo ""
          
      - name: æ£€å‡ºä»£ç ä»“åº“
        uses: actions/checkout@v4
        
      - name: ç³»ç»Ÿä¿¡æ¯
        run: |
          echo "============================================="
          echo "âœ… æ ‡å‡†å‹ï¼ˆæœªä¼˜åŒ–ï¼‰"
          echo "============================================="
          echo ""
          echo "ğŸ“Š å­˜å‚¨çŠ¶æ€ï¼š"
          df -h | grep -E '(Filesystem|/$)'
          echo ""
          echo "ğŸ§  å†…å­˜çŠ¶æ€ï¼š"
          free -h
          echo ""
          ROOT_AVAIL=$(df -BG --output=avail / | tail -1 | tr -d 'G ')
          echo "ğŸ’¾ æ ¹ç›®å½•å¯ç”¨ç©ºé—´: ${ROOT_AVAIL} GB"
          echo "============================================="
          echo ""
          
      - name: å®‰è£…å¹¶å¯åŠ¨åº”ç”¨
        run: |
          if [ -f "start.sh" ]; then
            echo "æ­£åœ¨å¯åŠ¨åº”ç”¨..."
            bash start.sh
          else
            echo "è­¦å‘Šï¼šæœªæ‰¾åˆ° start.sh æ–‡ä»¶ï¼Œè·³è¿‡åº”ç”¨å¯åŠ¨"
          fi

